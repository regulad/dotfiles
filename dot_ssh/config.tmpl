# Configuration
AddKeysToAgent yes
HashKnownHosts yes

# "Special" hosts
Host neodingus
    HostName neodingus.tail11540.ts.net
    User root
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host prodingus
    HostName prodingus.tail11540.ts.net
    User root
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host samsung-sm-a526u1
    HostName samsung-sm-a526u1.tail11540.ts.net
    Port 8022
    User u0_a322
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host teledeck8
    HostName teledeck8.tail11540.ts.net
    Port 8022
    User u0_a341
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host pihole
    HostName pihole.home.arpa
    User root
    PubkeyAuthentication no
    PreferredAuthentications password

# Static hosts
Host macserver
    HostName macserver.tail11540.ts.net

Host winserver
    HostName winserver.tail11540.ts.net

Host dingus-server
    HostName dingus-server.tail11540.ts.net

Host pelican
    HostName pelican.tail11540.ts.net

Host matrix
    HostName matrix.tail11540.ts.net

Host lancache
    HostName lancache.home.arpa

Host proencode
    HostName proencode.home.arpa

Host procuda
    HostName procuda.home.arpa

Host freeipa
    HostName freeipa.home.arpa

Host timemachine
    HostName timemachine.home.arpa

Host tinker
    HostName tinker.home.arpa

# Mobile hosts
Host penumbra
    HostName penumbra.tail11540.ts.net

Host winlite
    HostName winlite.tail11540.ts.net

# Oracle (Legacy VCN)
Host git.regulad.xyz

Match Host git.regulad.xyz User opc
    User opc
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host doppelgangerhq.com
    User ubuntu
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

# Oracle (wahlecloud)
Host tailscalerouter

Match Host tailscalerouter User opc
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/ssh-key-2025-12-08_tailscalerouter.key.pub
    IdentityFile ~/.ssh/ssh-key-2025-12-08_tailscalerouter.key  # fallback
{{ end }}
    IdentitiesOnly yes

Host livekit

Match Host livekit User opc
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/ssh-key-2025-12-19_livekit.key.pub
    IdentityFile ~/.ssh/ssh-key-2025-12-19_livekit.key  # fallback
{{ end }}
    IdentitiesOnly yes

Host mail

Match Host mail User opc
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/ssh-key-2025-12-08_mail.key.pub
    IdentityFile ~/.ssh/ssh-key-2025-12-08_mail.key  # fallback
{{ end }}
    IdentitiesOnly yes

# Personal
Host github.com
    HostName github.com
    User git
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Host git.regulad.xyz
    HostName git.regulad.xyz
    User git
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

# ncsu
Host github.ncsu.edu
    HostName github.ncsu.edu
    User git
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_ed25519_ncstate.pub
    IdentityFile ~/.ssh/id_ed25519_ncstate  # fallback
{{ end }}
    IdentitiesOnly yes

Host eos
    HostName remote.eos.ncsu.edu
    User pewahle
    PubkeyAuthentication no
    PreferredAuthentications password

# Globals
Host *
    # Try to use the user regulad on all systems
    User regulad
    PreferredAuthentications publickey   

# General idea of the fallback:
#    1. Try to get the agent's private key by the public key
#    2. If the private key isn't in the agent, and it exists on disk, load it. Else, crash.
Match User regulad
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_rsa.pub
    IdentityFile ~/.ssh/id_rsa  # fallback
{{ end }}
    IdentitiesOnly yes

Match User pewahle  # ncsu
{{ if not .useDummySecrets }}
    IdentityFile ~/.ssh/id_ed25519_ncstate.pub
    IdentityFile ~/.ssh/id_ed25519_ncstate  # fallback
{{ end }}
    IdentitiesOnly yes

